# This is a basic workflow to help you get started with Actions
name: "3 - Dependent Jobs"

# Controla quando o fluxo de trabalho ser√° executado
on:
  # Dispara o workflow em eventos de solicita√ß√£o push or pull mas somente para branch 'main'
  push:
    branches: [ "main", "teste**", "feature**" ]
  pull_request:
    branches: [ "main" ]
  
  # Permite que voc√™ execute este workflow manualmente na tab Actions
  workflow_dispatch:

# Uma execu√ß√£o de workflow √© composta por um ou mais jobs que podem ser executados sequencialmente ou em paralelo
jobs:
  # Este workflow contem dois jobs chamados "build" e "explore-github-actions"
  build:
    # O tipo de executor (runner) no qual o job ser√° executado
    runs-on: ubuntu-latest
    name: build

    # Steps representam uma sequencia de tarefas (tasks) que ser√£o executados como parte de um job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - name: Check out repository code
        uses: actions/checkout@v3

      # Runs a single command using the runners shell
      - name: Run a one-line script
        run: echo Hello, world!

      # Runs a set of commands using the runners shell
      - name: Run a multi-line script
        run: |
          echo Add other actions to build,
          echo test, and deploy your project.

  explore-github-actions:
    runs-on: ubuntu-latest
    name: explore-github-actions
    # needs identifica que qualquer job deve ser concluido com sucesso antes deste job (explore-github-actions) ser executado
    # Esse c√≥digo pode ser uma string ou array de strings. Se houver falha em um job, todos os jobs que dependem dele ser√£o ignorados, 
    # a menos que os jobs usem uma express√£o condicional que fa√ßa o job continuar.
    needs: build
    steps:
      - name: Check out repository code
        uses: actions/checkout@v3
        
      - name: executing some runs
        run: | 
          echo "üéâ The job was automatically triggered by a ${{ github.event_name }} event."
          echo "üêß This job is now running on a ${{ runner.os }} server hosted by GitHub!"
          echo "üîé The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."      
          echo "üí° The ${{ github.repository }} repository has been cloned to the runner."
          echo "üñ•Ô∏è The workflow is now ready to test your code on the runner."
          echo "This repository belongs to ${{ github.repository_owner }}"
      
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
          
      - run: echo "üçè This job's status is ${{ job.status }}."
  
    
